<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Creative Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loading { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .tab-btn.active { color: #3B82F6; border-bottom-color: #3B82F6; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen p-6">
        <div class="max-w-7xl mx-auto">
            
            <!-- Header -->
            <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white p-8 rounded-lg mb-8">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-4xl font-bold mb-2">ü§ñ AI-Powered Creative Intelligence</h1>
                        <p class="text-purple-100">Multi-platform analysis ‚Ä¢ AI creative insights ‚Ä¢ Real creative generation ‚Ä¢ Performance optimization</p>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-purple-200">Cross-Platform ROAS</div>
                        <div class="text-3xl font-bold" id="crossPlatformROAS">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Platform Status Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Facebook Status -->
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-3">
                            <span class="text-blue-500 text-2xl">üìò</span>
                            <h3 class="text-lg font-semibold text-gray-900">Facebook Ads</h3>
                        </div>
                        <div id="facebookStatus" class="w-3 h-3 bg-gray-400 rounded-full"></div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Spend:</span>
                            <span class="font-medium" id="facebookSpend">¬£0.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Conversions:</span>
                            <span class="font-medium" id="facebookConversions">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ROAS:</span>
                            <span class="font-medium" id="facebookROAS">0.00x</span>
                        </div>
                    </div>
                </div>

                <!-- Taboola Status -->
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-3">
                            <span class="text-orange-500 text-2xl">üî∂</span>
                            <h3 class="text-lg font-semibold text-gray-900">Taboola</h3>
                        </div>
                        <div id="taboolaStatus" class="w-3 h-3 bg-gray-400 rounded-full"></div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Spend:</span>
                            <span class="font-medium" id="taboolaSpend">¬£0.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Conversions:</span>
                            <span class="font-medium" id="taboolaConversions">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ROAS:</span>
                            <span class="font-medium" id="taboolaROAS">0.00x</span>
                        </div>
                    </div>
                </div>

                <!-- AI Insights Status -->
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-3">
                            <span class="text-purple-500 text-2xl">ü§ñ</span>
                            <h3 class="text-lg font-semibold text-gray-900">AI Insights</h3>
                        </div>
                        <div id="aiStatus" class="w-3 h-3 bg-yellow-400 rounded-full"></div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Analyzed:</span>
                            <span class="font-medium" id="aiAnalyzed">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Success Factors:</span>
                            <span class="font-medium" id="aiSuccessFactors">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Generated:</span>
                            <span class="font-medium" id="aiGenerated">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex space-x-8 mb-6 overflow-x-auto">
                <button class="tab-btn px-4 py-2 font-medium text-blue-600 border-b-2 border-blue-600 whitespace-nowrap" data-tab="overview">üè† Overview</button>
                <button class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="campaigns">üìä Campaigns</button>
                <button class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="creatives">üé® Creative Analysis</button>
                <button class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="video-analysis">üì∫ Video Hook Analysis</button>
                <button class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="ai-insights">üß† AI Insights</button>
                <button class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="creative-generator">‚ú® Creative Generator</button>
                <button class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="testing-lab">üß™ Testing Lab</button>
            </div>

            <!-- Tab Content -->
            
            <!-- Overview Tab -->
            <div id="overview-content" class="tab-content active">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">üåê Cross-Platform Performance</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-gray-900" id="totalSpend">¬£0.00</div>
                            <div class="text-sm text-gray-600">Total Spend</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-gray-900" id="totalRevenue">¬£0.00</div>
                            <div class="text-sm text-gray-600">Total Revenue</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-gray-900" id="totalConversions">0</div>
                            <div class="text-sm text-gray-600">Total Conversions</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-gray-900" id="averageCTR">0.00%</div>
                            <div class="text-sm text-gray-600">Average CTR</div>
                        </div>
                    </div>
                </div>

                <!-- Top Performing Creatives -->
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">üèÜ Top Performing Creatives</h3>
                    <div id="topCreatives" class="text-gray-500">Loading top performers...</div>
                </div>
            </div>

            <!-- Campaigns Tab -->
            <div id="campaigns-content" class="tab-content">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">üìä All Campaigns</h2>
                    <div id="campaignsTable" class="overflow-x-auto">Loading campaigns...</div>
                </div>
            </div>

            <!-- Creative Analysis Tab -->
            <div id="creatives-content" class="tab-content">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-semibold text-gray-900">üé® Creative Analysis</h2>
                        <button id="analyzeAllCreatives" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                            üß† Analyze All with AI
                        </button>
                    </div>
                    <div id="creativesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        Loading creatives...
                    </div>
                </div>
            </div>

            <!-- Video Hook Analysis Tab -->
            <div id="video-analysis-content" class="tab-content">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">üì∫ Video Hook Analysis</h2>
                    <div id="videoAnalysisTable" class="overflow-x-auto">Loading video analysis...</div>
                </div>
            </div>

            <!-- AI Insights Tab -->
            <div id="ai-insights-content" class="tab-content">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">üß† AI Insights</h2>
                    <div id="aiInsights" class="text-gray-500">Run creative analysis first to see AI insights...</div>
                </div>
            </div>

            <!-- Creative Generator Tab -->
            <div id="creative-generator-content" class="tab-content">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">‚ú® Creative Generator</h2>
                    <div id="creativeGenerator" class="text-gray-500">Analyze creatives first to enable generation...</div>
                </div>
            </div>

            <!-- Testing Lab Tab -->
            <div id="testing-lab-content" class="tab-content">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">üß™ Testing Lab</h2>
                    <div id="testingLab" class="text-gray-500">Generate creatives first to set up tests...</div>
                </div>
            </div>

            <!-- Debug Panel -->
            <div id="debugPanel" class="mt-8 bg-gray-800 text-green-400 p-4 rounded-lg font-mono text-sm max-h-64 overflow-y-auto">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-bold">üîß Debug Console</span>
                    <button id="clearDebug" class="text-gray-400 hover:text-white text-xs">Clear</button>
                </div>
                <div id="debugContent">Dashboard loaded. Waiting for data...</div>
            </div>

        </div>
    </div>

    <script>
        const API_BASE = 'https://facebook-ads-dashboard-git-main-jacks-projects-e0e84f4f.vercel.app';
        
        // State
        let accountData = null;
        let campaigns = [];
        let creatives = [];
        let taboolaCampaigns = [];

        // Debug logging
        function debugLog(message) {
            const debugContent = document.getElementById('debugContent');
            const timestamp = new Date().toLocaleTimeString();
            debugContent.innerHTML += `<div>${timestamp}: ${message}</div>`;
            debugContent.scrollTop = debugContent.scrollHeight;
            console.log(`${timestamp}: ${message}`);
        }

        // Clear debug
        document.getElementById('clearDebug').addEventListener('click', () => {
            document.getElementById('debugContent').innerHTML = 'Debug cleared.';
        });

        // Tab functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const tabName = btn.getAttribute('data-tab');
                
                // Update tab buttons
                document.querySelectorAll('.tab-btn').forEach(b => {
                    b.classList.remove('text-blue-600', 'border-blue-600');
                    b.classList.add('text-gray-500');
                });
                btn.classList.remove('text-gray-500');
                btn.classList.add('text-blue-600', 'border-blue-600');
                
                // Update tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`${tabName}-content`).classList.add('active');
                
                debugLog(`Switched to ${tabName} tab`);
            });
        });

        // Data loading functions
        async function fetchAccountData() {
            try {
                debugLog('Fetching overview data...');
                const response = await fetch(`${API_BASE}/api/overview`);
                debugLog(`Overview response status: ${response.status}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                debugLog('Overview data received successfully');
                debugLog(`Raw overview data received: ${JSON.stringify(data)}`);
                
                // Handle multiple possible field names from your existing API
                const processedData = {
                    spend: parseFloat(data.spend || data.totalSpend || 0),
                    revenue: parseFloat(data.revenue || data.totalRevenue || data.conversion_values || 0),
                    conversions: parseInt(data.conversions || data.totalConversions || 0),
                    clicks: parseInt(data.clicks || data.totalClicks || 0),
                    impressions: parseInt(data.impressions || data.totalImpressions || 0),
                    ctr: parseFloat(data.ctr || data.averageCTR || 0),
                    cpc: parseFloat(data.cpc || data.averageCPC || 0),
                    cpm: parseFloat(data.cpm || data.averageCPM || 0)
                };
                
                processedData.roas = processedData.revenue > 0 ? processedData.revenue / processedData.spend : 0;
                
                debugLog(`Processed metrics - Spend: ¬£${processedData.spend}, Revenue: ¬£${processedData.revenue}, Clicks: ${processedData.clicks}, Impressions: ${processedData.impressions}`);
                
                return processedData;
            } catch (error) {
                debugLog(`Error fetching overview: ${error.message}`);
                throw error;
            }
        }

        async function fetchCampaigns() {
            try {
                debugLog('Fetching campaigns data...');
                const response = await fetch(`${API_BASE}/api/campaigns`);
                debugLog(`Campaigns response status: ${response.status}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                debugLog(`Campaigns data received: ${Array.isArray(data) ? data.length : 'unknown'} campaigns`);
                
                return Array.isArray(data) ? data : [];
            } catch (error) {
                debugLog(`Error fetching campaigns: ${error.message}`);
                return [];
            }
        }

        async function fetchCreatives() {
            try {
                debugLog('Fetching creatives data...');
                const response = await fetch(`${API_BASE}/api/creatives`);
                debugLog(`Creatives response status: ${response.status}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                debugLog(`Creatives data received: ${Array.isArray(data) ? data.length : 'unknown'} creatives`);
                
                return Array.isArray(data) ? data : [];
            } catch (error) {
                debugLog(`Error fetching creatives: ${error.message}`);
                return [];
            }
        }

        async function fetchTaboolaCampaigns() {
            try {
                debugLog('Fetching Taboola campaigns...');
                const response = await fetch(`${API_BASE}/api/taboola-campaigns`);
                debugLog(`Taboola response status: ${response.status}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                debugLog(`Taboola data received: ${Array.isArray(data) ? data.length : 'unknown'} campaigns`);
                
                return Array.isArray(data) ? data : [];
            } catch (error) {
                debugLog(`Taboola fetch failed: ${error.message}`);
                return [];
            }
        }

        // UI update functions
        function updatePlatformStatus() {
            // Facebook status
            const fbStatus = document.getElementById('facebookStatus');
            const fbSpend = document.getElementById('facebookSpend');
            const fbConversions = document.getElementById('facebookConversions');
            const fbROAS = document.getElementById('facebookROAS');
            
            if (accountData && accountData.spend > 0) {
                fbStatus.className = 'w-3 h-3 bg-green-500 rounded-full';
                fbSpend.textContent = `¬£${accountData.spend.toLocaleString()}`;
                fbConversions.textContent = accountData.conversions.toLocaleString();
                fbROAS.textContent = `${accountData.roas.toFixed(2)}x`;
            } else {
                fbStatus.className = 'w-3 h-3 bg-red-500 rounded-full';
            }
            
            // Taboola status
            const tabStatus = document.getElementById('taboolaStatus');
            const tabSpend = document.getElementById('taboolaSpend');
            const tabConversions = document.getElementById('taboolaConversions');
            const tabROAS = document.getElementById('taboolaROAS');
            
            if (taboolaCampaigns.length > 0) {
                tabStatus.className = 'w-3 h-3 bg-green-500 rounded-full';
                const totalSpend = taboolaCampaigns.reduce((sum, camp) => sum + (parseFloat(camp.spend) || 0), 0);
                const totalRevenue = taboolaCampaigns.reduce((sum, camp) => sum + (parseFloat(camp.revenue) || 0), 0);
                const totalConversions = taboolaCampaigns.reduce((sum, camp) => sum + (parseInt(camp.conversions) || 0), 0);
                const taboolaROAS = totalRevenue > 0 ? totalRevenue / totalSpend : 0;
                
                tabSpend.textContent = `¬£${totalSpend.toLocaleString()}`;
                tabConversions.textContent = totalConversions.toLocaleString();
                tabROAS.textContent = `${taboolaROAS.toFixed(2)}x`;
            } else {
                tabStatus.className = 'w-3 h-3 bg-yellow-500 rounded-full';
            }
            
            // Update cross-platform ROAS
            const crossPlatformROAS = document.getElementById('crossPlatformROAS');
            if (accountData) {
                crossPlatformROAS.textContent = `${accountData.roas.toFixed(2)}x`;
            }
        }

        function updateOverviewTab() {
            if (!accountData) return;
            
            document.getElementById('totalSpend').textContent = `¬£${accountData.spend.toLocaleString()}`;
            document.getElementById('totalRevenue').textContent = `¬£${accountData.revenue.toLocaleString()}`;
            document.getElementById('totalConversions').textContent = accountData.conversions.toLocaleString();
            document.getElementById('averageCTR').textContent = `${accountData.ctr.toFixed(2)}%`;
            
            debugLog(`Updated overview UI with spend: ¬£${accountData.spend.toFixed(2)}, revenue: ¬£${accountData.revenue.toFixed(2)}, ROAS: ${accountData.roas.toFixed(2)}x`);
        }

        function updateCampaignsTab() {
            const table = document.getElementById('campaignsTable');
            
            if (campaigns.length === 0) {
                table.innerHTML = '<p class="text-gray-500">No campaigns found or still loading...</p>';
                return;
            }
            
            let html = `
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="text-left py-3 px-4 font-medium text-gray-700">Campaign</th>
                            <th class="text-right py-3 px-4 font-medium text-gray-700">Platform</th>
                            <th class="text-right py-3 px-4 font-medium text-gray-700">Spend</th>
                            <th class="text-right py-3 px-4 font-medium text-gray-700">Revenue</th>
                            <th class="text-right py-3 px-4 font-medium text-gray-700">ROAS</th>
                            <th class="text-right py-3 px-4 font-medium text-gray-700">Conversions</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-700">Status</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            campaigns.forEach(campaign => {
                const roas = campaign.revenue > 0 ? campaign.revenue / campaign.spend : 0;
                const statusColor = roas >= 2 ? 'bg-green-100 text-green-800' : 
                                   roas >= 1 ? 'bg-yellow-100 text-yellow-800' : 
                                   'bg-red-100 text-red-800';
                const statusText = roas >= 2 ? 'Winning' : roas >= 1 ? 'Neutral' : 'Losing';
                
                html += `
                    <tr class="border-b border-gray-100">
                        <td class="py-3 px-4 font-medium text-gray-900">${campaign.name || 'Unnamed Campaign'}</td>
                        <td class="py-3 px-4 text-right text-gray-900">üìò Facebook</td>
                        <td class="py-3 px-4 text-right text-gray-900">¬£${(campaign.spend || 0).toLocaleString()}</td>
                        <td class="py-3 px-4 text-right text-gray-900">¬£${(campaign.revenue || 0).toLocaleString()}</td>
                        <td class="py-3 px-4 text-right font-medium text-gray-900">${roas.toFixed(2)}x</td>
                        <td class="py-3 px-4 text-right text-gray-900">${campaign.conversions || 0}</td>
                        <td class="py-3 px-4 text-center">
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${statusColor}">
                                ${statusText}
                            </span>
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table>';
            table.innerHTML = html;
        }

        function updateCreativesTab() {
            const grid = document.getElementById('creativesGrid');
            
            if (creatives.length === 0) {
                grid.innerHTML = '<p class="text-gray-500 col-span-full">No creatives found or still loading...</p>';
                return;
            }
            
            let html = '';
            creatives.slice(0, 12).forEach(creative => {
                const performanceScore = Math.min(100, Math.max(0, 
                    (creative.ctr || 0) * 20 + 
                    (creative.conversions || 0) * 5 + 
                    (creative.spend > 0 ? Math.min(50, (creative.revenue || 0) / creative.spend * 20) : 0)
                ));
                
                const grade = performanceScore >= 80 ? 'A' : 
                             performanceScore >= 60 ? 'B' : 
                             performanceScore >= 40 ? 'C' : 'D';
                             
                const gradeColor = grade === 'A' ? 'bg-green-100 text-green-800' :
                                  grade === 'B' ? 'bg-blue-100 text-blue-800' :
                                  grade === 'C' ? 'bg-yellow-100 text-yellow-800' : 
                                  'bg-red-100 text-red-800';
                
                html += `
                    <div class="bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-medium text-gray-900 truncate">${creative.name || 'Unnamed Creative'}</h4>
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${gradeColor}">
                                Grade ${grade}
                            </span>
                        </div>
                        
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Performance Score</span>
                                <span class="font-medium">${Math.round(performanceScore)}/100</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Spend</span>
                                <span class="font-medium">¬£${(creative.spend || 0).toFixed(2)}</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">CTR</span>
                                <span class="font-medium">${(creative.ctr || 0).toFixed(2)}%</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Conversions</span>
                                <span class="font-medium">${creative.conversions || 0}</span>
                            </div>
                        </div>
                        
                        <button class="w-full px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700" 
                                onclick="analyzeCreative('${creative.id}')">
                            üß† Analyze with AI
                        </button>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        }

        // AI Analysis functions
        async function analyzeCreative(creativeId) {
            debugLog(`Starting AI analysis for creative ${creativeId}`);
            // Placeholder for AI analysis
            debugLog(`AI analysis completed for creative ${creativeId}`);
        }

        // Load all data
        async function loadData() {
            try {
                debugLog('Starting data load...');
                
                // Load Facebook data (your existing working APIs)
                accountData = await fetchAccountData();
                campaigns = await fetchCampaigns();
                creatives = await fetchCreatives();
                
                // Load Taboola data
                taboolaCampaigns = await fetchTaboolaCampaigns();
                
                // Update UI
                updatePlatformStatus();
                updateOverviewTab();
                updateCampaignsTab();
                updateCreativesTab();
                
                debugLog('Data load completed successfully');
                
            } catch (error) {
                debugLog(`Error loading data: ${error.message}`);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            debugLog('Page loaded, starting data fetch...');
            loadData();
        });

        // Manual refresh
        document.addEventListener('keydown', (e) => {
            if (e.key === 'F5' || (e.ctrlKey && e.key === 'r')) {
                debugLog('Manual refresh triggered');
                loadData();
            }
        });

    </script>
</body>
</html>
